function append(t,e,a){switch(e){case"add":addLi(t,a);break;case"check":checkLi(t,a);break;case"del":delLi(t,a);break;default:reloadList(t)}save(t)}function save(t){var e=JSON.stringify(t);localStorage.setItem("toDoApplist",e)}function openApp(){var t;return null==JSON.parse(localStorage.getItem("toDoApplist"))?t=[]:append(t=JSON.parse(localStorage.getItem("toDoApplist"))),t}function addLi(t,e){$("input#doName").val(""),$("#countOfInput").text("0"),$(".notify").remove(),t.push({name:e,checked:!1}),$(".tasks").append(getTemplated(e,t.length-1,0,"add")),$("#count").text(t.length)}function checkLi(t,e){0==t[e].checked&&($("li#id"+e).addClass("checked"),t[e].checked=!0)}function delLi(t,e){t.splice(e,1),reloadList(t)}function reloadList(t){var e=t.length;$(".tasks").html(""),$("input#doName").val(""),$("#count").text(e);for(var a=0;a<e;a++)1==t[a].checked?$(".tasks").append(getTemplated(t[a].name,a,1)):$(".tasks").append(getTemplated(t[a].name,a,0))}function getTemplated(t,e,a,n){var i=getTemplate(),d=i[a],l=[e,e+1,t];switch(n){case"add":!function(){for(var t=0;t<l.length;t++)d=d.replace(i[2][t],l[t])}();break;default:!function(t){for(var e=0;e<l.length;e++)d=d.replace(t[2][e],l[e])}(i)}return d}function getTemplate(){return['<li id="id{{id}}">\t\t\t\t\t<div><span>{{n}}</span><span>{{name}}</span></div>\t\t\t\t\t<div class="openButt">\t\t\t\t\t\t•••\t\t\t\t\t\t<div class="list">\t\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t\t<li class="done">Выполнено</li>\t\t\t\t\t\t\t\t<li class="remove">Удалить</li>\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</li>','<li id="id{{id}}" class="checked">\t\t\t\t\t<div><span>{{n}}</span><span>{{name}}</span></div>\t\t\t\t\t<div class="openButt">\t\t\t\t\t\t•••\t\t\t\t\t\t<div class="list">\t\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t\t<li class="remove">Удалить</li>\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</li>',["{{id}}","{{n}}","{{name}}"]]}function skipPreloader(){setTimeout(function(){$(".preloader").css("left","-100%"),setTimeout(function(){$(".preloader").remove()},500)},1e3)}$(function(){skipPreloader();var t=openApp();t.length>0&&$(".notify").remove(),$("#doAdd").on("click",function(){$("input#doName").val().length>0&&append(t,"add",$("input#doName").val())}),$(".tasks").on("click",".done",function(){var e=$(this).parents().parents().parents().parents().attr("id");append(t,"check",e.replace("id","")),$(this).remove()}),$(".tasks").on("click",".remove",function(){append(t,"del",$(this).parents().parents().parents().parents().attr("id").replace("id",""))}),$("input#doName").on("input",function(){var t;1==$("input#doName").val().length&&" "==$("input#doName").val()?($("input#doName").val(""),t=1):t=0,0==t&&$("#countOfInput").text($("input#doName").val().length)})});